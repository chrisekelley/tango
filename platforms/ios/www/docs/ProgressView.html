<<<<<<< HEAD
<!DOCTYPE html>  <html> <head>   <title>ProgressView.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               ProgressView.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">ProgressView</span> <span class="k">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span>

  <span class="nv">INDIVIDUAL : </span><span class="mi">1</span>
  <span class="nv">AGGREGATE  : </span><span class="mi">2</span>

  <span class="nv">className : </span><span class="s">&quot;ProgressView&quot;</span>

  <span class="nv">events:</span>
    <span class="s">&#39;click .back&#39;</span>            <span class="o">:</span> <span class="s">&#39;goBack&#39;</span>
    <span class="s">&#39;click .select_itemType&#39;</span> <span class="o">:</span> <span class="s">&#39;selectItemType&#39;</span>
    <span class="s">&#39;click .xtick&#39;</span>           <span class="o">:</span> <span class="s">&#39;selectAssessment&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>! - variable name FUBAR
assessment = part = week</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">selectAssessment: </span><span class="nf">(event) -&gt;</span>
    <span class="vi">@selected.week = </span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;data-index&#39;</span><span class="p">))</span>
    <span class="nx">@updateTable</span><span class="p">()</span>
    <span class="nx">@updateFlot</span><span class="p">()</span>

  <span class="nv">selectItemType: </span><span class="nf">(event) -&gt;</span>
    <span class="nv">$target = </span><span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
    <span class="vi">@selected.itemType = </span><span class="nx">$target</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;data-itemType&#39;</span><span class="p">)</span>
    <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&quot;.select_itemType&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&quot;selected&quot;</span><span class="p">)</span>
    <span class="nx">$target</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&quot;selected&quot;</span><span class="p">)</span>
    <span class="nx">@updateTable</span><span class="p">()</span>
    <span class="nx">@updateFlot</span><span class="p">()</span>

  <span class="nv">goBack: </span><span class="o">-&gt;</span> <span class="nx">history</span><span class="p">.</span><span class="nx">go</span> <span class="o">-</span><span class="mi">1</span>

  <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Arguments and member vars</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@results      = </span><span class="nx">options</span><span class="p">.</span><span class="nx">results</span>
    <span class="vi">@student      = </span><span class="nx">options</span><span class="p">.</span><span class="nx">student</span>
    <span class="vi">@subtests     = </span><span class="nx">options</span><span class="p">.</span><span class="nx">subtests</span>
    <span class="vi">@klass        = </span><span class="nx">options</span><span class="p">.</span><span class="nx">klass</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Catch things that "look" "odd"</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="o">not</span> <span class="nx">@klass</span><span class="o">?</span>          <span class="k">then</span> <span class="nx">Utils</span><span class="p">.</span><span class="nx">log</span> <span class="nx">@</span><span class="p">,</span> <span class="s">&quot;No klass.&quot;</span>
    <span class="k">if</span> <span class="o">not</span> <span class="nx">@subtests</span><span class="o">?</span>       <span class="k">then</span> <span class="nx">Utils</span><span class="p">.</span><span class="nx">log</span> <span class="nx">@</span><span class="p">,</span> <span class="s">&quot;No progress type subtests.&quot;</span>
    <span class="k">if</span> <span class="nx">@results</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="vi">@renderReady = </span><span class="kc">true</span>
      <span class="nx">@render</span><span class="p">()</span>
      <span class="k">return</span>


    <span class="vi">@mode = </span><span class="k">if</span> <span class="nx">@student</span><span class="o">?</span> <span class="k">then</span> <span class="nx">@INDIVIDUAL</span> <span class="k">else</span> <span class="nx">@AGGREGATE</span>

    <span class="vi">@subtestNames   = </span><span class="p">{}</span>
    <span class="vi">@benchmarkScore = </span><span class="p">{}</span>
    <span class="vi">@rows           = </span><span class="p">[]</span>
    <span class="vi">@partCount      = </span><span class="mi">0</span>
    <span class="vi">@flot           = </span><span class="kc">null</span> <span class="c1"># for flot</span>
    <span class="vi">@lastPart       = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">_</span><span class="p">.</span><span class="nx">compact</span><span class="p">(</span><span class="nx">@subtests</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="s">&quot;part&quot;</span><span class="p">))</span>
    <span class="vi">@resultsByPart = </span><span class="p">[]</span>
    <span class="vi">@itemTypeList  = </span><span class="p">{}</span>
    <span class="vi">@selected =</span>
      <span class="s">&quot;itemType&quot;</span> <span class="o">:</span> <span class="kc">null</span>
      <span class="s">&quot;week&quot;</span>     <span class="o">:</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Find out how many parts belong to the progress report
Make a names by pertinentIndex and itemType</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">parts = </span><span class="p">[]</span>
    <span class="k">for</span> <span class="nx">subtest</span> <span class="k">in</span> <span class="nx">@subtests</span><span class="p">.</span><span class="nx">models</span>
      <span class="nx">parts</span><span class="p">.</span><span class="nx">push</span> <span class="nx">subtest</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;part&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="o">!~</span><span class="nx">parts</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">subtest</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;part&quot;</span><span class="p">))</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>get names</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">i = </span><span class="nx">parts</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">subtest</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;part&quot;</span><span class="p">))</span>
      <span class="nx">@subtestNames</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">@subtestNames</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">?</span>
      <span class="nx">@subtestNames</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">subtest</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;itemType&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nx">subtest</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span>

    <span class="vi">@partCount = </span><span class="nx">parts</span><span class="p">.</span><span class="nx">length</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>make the resultsByPart and the itemTypeList</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@resultsByPart = </span><span class="nx">@results</span><span class="p">.</span><span class="nx">indexBy</span> <span class="s">&quot;part&quot;</span>
    <span class="nx">@itemTypeList</span><span class="p">[</span><span class="nx">result</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;itemType&quot;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()]</span> <span class="o">=</span> <span class="kc">true</span> <span class="k">for</span> <span class="nx">result</span> <span class="k">in</span> <span class="nx">@results</span><span class="p">.</span><span class="nx">models</span>
    <span class="vi">@itemTypeList = </span><span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">@itemTypeList</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Compile data and save to @rows
this is for the table</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>iterate through all weeks</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">for</span> <span class="nx">part</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">..</span><span class="nx">@lastPart</span><span class="p">]</span>

      <span class="k">if</span> <span class="nx">@resultsByPart</span><span class="p">[</span><span class="nx">part</span><span class="p">]</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="k">then</span> <span class="k">continue</span> <span class="c1"># if there&#39;s no results for that week, skip it</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>iterate through all itemTypes for this week</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">itemTypes = </span><span class="p">{}</span>
      <span class="k">for</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">@resultsByPart</span><span class="p">[</span><span class="nx">part</span><span class="p">]</span>

        <span class="k">if</span> <span class="nx">@mode</span> <span class="o">==</span> <span class="nx">@INDIVIDUAL</span> <span class="o">&amp;&amp;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;studentId&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="nx">@student</span><span class="p">.</span><span class="nx">id</span> <span class="k">then</span> <span class="k">continue</span>

        <span class="nv">itemType = </span><span class="nx">result</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;itemType&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>select first itemType</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="vi">@selected.itemType = </span><span class="nx">itemType</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span><span class="o">?</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>push an object</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">itemTypes</span><span class="p">[</span><span class="nx">itemType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">itemTypes</span><span class="p">[</span><span class="nx">itemType</span><span class="p">]</span><span class="o">?</span>
        <span class="nx">itemTypes</span><span class="p">[</span><span class="nx">itemType</span><span class="p">].</span><span class="nx">push</span>
          <span class="s">&quot;name&quot;</span>           <span class="o">:</span> <span class="nx">itemType</span><span class="p">.</span><span class="nx">titleize</span><span class="p">()</span>
          <span class="s">&quot;key&quot;</span>            <span class="o">:</span> <span class="nx">itemType</span>
          <span class="s">&quot;correct&quot;</span>        <span class="o">:</span> <span class="nx">result</span><span class="p">.</span><span class="nx">get</span> <span class="s">&quot;correct&quot;</span>
          <span class="s">&quot;attempted&quot;</span>      <span class="o">:</span> <span class="nx">result</span><span class="p">.</span><span class="nx">get</span> <span class="s">&quot;attempted&quot;</span>
          <span class="s">&quot;itemsPerMinute&quot;</span> <span class="o">:</span> <span class="nx">result</span><span class="p">.</span><span class="nx">getCorrectPerSeconds</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>

        <span class="nx">@benchmarkScore</span><span class="p">[</span><span class="nx">itemType</span><span class="p">]</span> <span class="o">=</span> <span class="nx">@subtests</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;subtestId&quot;</span><span class="p">)).</span><span class="nx">getNumber</span><span class="p">(</span><span class="s">&quot;scoreTarget&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>each row is one week/part</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@rows</span><span class="p">.</span><span class="nx">push</span>
        <span class="s">&quot;part&quot;</span>      <span class="o">:</span> <span class="nx">part</span>
        <span class="s">&quot;itemTypes&quot;</span> <span class="o">:</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">itemTypes</span><span class="p">))</span> <span class="c1"># object -&gt; array</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Aggregate mode averages data across students</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@rows = </span><span class="nx">@aggregate</span> <span class="nx">@rows</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Select the most recent thing with data</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="nx">@rows</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">0</span>
      <span class="vi">@selected =</span>
        <span class="nv">week     : </span><span class="nx">@rows</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="nv">itemType : </span><span class="nx">_</span><span class="p">.</span><span class="nx">last</span><span class="p">(</span><span class="nx">@rows</span><span class="p">)[</span><span class="s">&#39;itemTypes&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">].</span><span class="nx">key</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Make flot data</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">pointsByItemType = </span><span class="p">{}</span>
    <span class="k">for</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">@rows</span>
      <span class="k">for</span> <span class="nx">itemType</span> <span class="k">in</span> <span class="nx">row</span><span class="p">.</span><span class="nx">itemTypes</span>
        <span class="nx">pointsByItemType</span><span class="p">[</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">pointsByItemType</span><span class="p">[</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">key</span><span class="p">]</span><span class="o">?</span> 
        <span class="nx">pointsByItemType</span><span class="p">[</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">key</span><span class="p">].</span><span class="nx">push</span> <span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">itemType</span><span class="p">.</span><span class="nx">itemsPerMinute</span><span class="p">]</span>
    <span class="vi">@flotData      = </span><span class="p">[]</span>
    <span class="vi">@benchmarkData = </span><span class="p">[]</span>
    <span class="nv">i = </span><span class="mi">0</span>

    <span class="k">for</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span> <span class="k">of</span> <span class="nx">pointsByItemType</span>
      <span class="nv">key = </span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
      <span class="nx">@flotData</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&quot;data&quot;</span>  <span class="o">:</span> <span class="nx">data</span>
        <span class="s">&quot;label&quot;</span> <span class="o">:</span> <span class="nx">name</span><span class="p">.</span><span class="nx">titleize</span><span class="p">()</span>
        <span class="s">&quot;key&quot;</span>   <span class="o">:</span> <span class="nx">key</span>
        <span class="s">&quot;lines&quot;</span> <span class="o">:</span>
          <span class="s">&quot;show&quot;</span> <span class="o">:</span> <span class="kc">true</span>
        <span class="s">&quot;points&quot;</span> <span class="o">:</span>
          <span class="s">&quot;show&quot;</span> <span class="o">:</span> <span class="kc">true</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Create benchmark flot graphs</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@flotBenchmark = </span><span class="p">[]</span>
    <span class="k">for</span> <span class="nx">itemType</span><span class="p">,</span> <span class="nx">subtests</span> <span class="k">of</span> <span class="nx">@subtests</span><span class="p">.</span><span class="nx">indexBy</span><span class="p">(</span><span class="s">&quot;itemType&quot;</span><span class="p">)</span>
      <span class="nv">dataForBenchmark = </span><span class="p">[]</span>
      <span class="k">for</span> <span class="nx">subtest</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">subtests</span>
        <span class="nx">dataForBenchmark</span><span class="p">.</span><span class="nx">push</span> <span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">subtest</span><span class="p">.</span><span class="nx">getNumber</span><span class="p">(</span><span class="s">&quot;scoreTarget&quot;</span><span class="p">)]</span>

      <span class="nx">@flotBenchmark</span><span class="p">[</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&quot;label&quot;</span> <span class="o">:</span> <span class="s">&quot;Progress benchmark&quot;</span>
        <span class="s">&quot;data&quot;</span> <span class="o">:</span> <span class="nx">dataForBenchmark</span>
        <span class="s">&quot;color&quot;</span> <span class="o">:</span> <span class="s">&quot;</span><span class="err">#</span><span class="s">aaa&quot;</span>
        <span class="s">&quot;lines&quot;</span> <span class="o">:</span>
          <span class="s">&quot;show&quot;</span>  <span class="o">:</span> <span class="kc">true</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>create warning thresholds</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@warningThresholds = </span><span class="p">{}</span>
    <span class="k">for</span> <span class="nx">itemType</span><span class="p">,</span> <span class="nx">subtests</span> <span class="k">of</span> <span class="nx">@subtests</span><span class="p">.</span><span class="nx">indexBy</span><span class="p">(</span><span class="s">&quot;itemType&quot;</span><span class="p">)</span>
      <span class="nx">@warningThresholds</span><span class="p">[</span><span class="nx">itemType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="k">for</span> <span class="nx">subtest</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">subtests</span>
        <span class="nx">@warningThresholds</span><span class="p">[</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()].</span><span class="nx">push</span> 
          <span class="nv">target: </span><span class="nx">subtest</span><span class="p">.</span><span class="nx">getNumber</span><span class="p">(</span><span class="s">&quot;scoreTarget&quot;</span><span class="p">)</span>
          <span class="nv">spread: </span><span class="nx">subtest</span><span class="p">.</span><span class="nx">getNumber</span><span class="p">(</span><span class="s">&quot;scoreSpread&quot;</span><span class="p">)</span>
          <span class="nv">seconds: </span><span class="nx">subtest</span><span class="p">.</span><span class="nx">getNumber</span><span class="p">(</span><span class="s">&quot;timer&quot;</span><span class="p">)</span>


    <span class="vi">@renderReady = </span><span class="kc">true</span>
    <span class="nx">@render</span><span class="p">()</span>

  <span class="nv">render: </span><span class="o">-&gt;</span>

    <span class="k">return</span> <span class="k">if</span> <span class="o">not</span> <span class="nx">@renderReady</span>
    <span class="nv">$window = </span><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">)</span>
    <span class="nv">win = </span>
      <span class="nv">h : </span><span class="nx">$window</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span>
      <span class="nv">w : </span><span class="nx">$window</span><span class="p">.</span><span class="nx">width</span><span class="p">()</span>
    
    <span class="nv">studentName = </span><span class="s">&quot;</span>
<span class="s">      &lt;h2&gt;</span><span class="si">#{</span><span class="nx">@student</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span><span class="si">}</span><span class="s">&lt;/h2&gt;</span>
<span class="s">    &quot;</span> <span class="k">if</span> <span class="nx">@mode</span> <span class="o">==</span> <span class="nx">@INDIVIDUAL</span>

    <span class="nv">html = </span><span class="s">&quot;</span>
<span class="s">      &lt;h1&gt;Progress table&lt;/h1&gt;</span>
<span class="s">      </span><span class="si">#{</span><span class="nx">studentName</span> <span class="o">||</span> <span class="s">&quot;&quot;</span><span class="si">}</span><span class="s"></span>
<span class="s">    &quot;</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Empty warning</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">htmlWarning = </span><span class="s">&quot;&lt;p&gt;No test data for this type of report. Return to the &lt;a href=&#39;</span><span class="err">#</span><span class="s">class&#39;&gt;class menu&lt;/a&gt; and click the &lt;img src=&#39;images/icon_run.png&#39;&gt; icon to collect data.&lt;/p&gt;&quot;</span>

    <span class="k">if</span> <span class="nx">@results</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="nx">@$el</span><span class="p">.</span><span class="nx">html</span> <span class="s">&quot;</span>
<span class="s">        </span><span class="si">#{</span><span class="nx">html</span><span class="si">}</span><span class="s"></span>
<span class="s">        </span><span class="si">#{</span><span class="nx">htmlWarning</span><span class="si">}</span><span class="s"></span>
<span class="s">      &quot;</span>
      <span class="nx">@trigger</span> <span class="s">&quot;rendered&quot;</span>
      <span class="k">return</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Flot containers</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;</span>
<span class="s">      &lt;div id=&#39;flot-menu&#39;&gt;</span>
<span class="s">      &quot;</span>

    <span class="k">for</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">_</span><span class="p">.</span><span class="nx">uniq</span><span class="p">(</span><span class="nx">@subtests</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="s">&quot;itemType&quot;</span><span class="p">))</span>
      <span class="nv">label = </span><span class="nx">key</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[_-]/g</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">).</span><span class="nx">capitalize</span><span class="p">()</span>
      <span class="nv">selectedClass = </span><span class="k">if</span> <span class="nx">key</span> <span class="o">==</span> <span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span> <span class="k">then</span> <span class="s">&quot;selected&quot;</span> <span class="k">else</span> <span class="s">&quot;&quot;</span>
      <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;&lt;button class=&#39;command select_itemType </span><span class="si">#{</span><span class="nx">selectedClass</span><span class="si">}</span><span class="s">&#39; data-itemType=&#39;</span><span class="si">#{</span><span class="nx">key</span><span class="si">}</span><span class="s">&#39;&gt;</span><span class="si">#{</span><span class="nx">label</span><span class="si">}</span><span class="s">&lt;/button&gt;&quot;</span>

    <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;</span>
<span class="s">      &lt;/div&gt;</span>
<span class="s">      &lt;div id=&#39;flot-container&#39; style=&#39;width: </span><span class="si">#{</span><span class="nb">window</span><span class="p">.</span><span class="nx">w</span><span class="o">*</span><span class="mf">0.8</span><span class="si">}</span><span class="s">px; height:300px;&#39;&gt;&lt;/div&gt;</span>
<span class="s">    &quot;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Set the table</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;</span>
<span class="s">    &lt;div id=&#39;table_container&#39;&gt;&lt;/div&gt;</span>
<span class="s">    &lt;button class=&#39;navigation back&#39;&gt;</span><span class="si">#{</span><span class="nx">t</span><span class="p">(</span><span class="s">&#39;back&#39;</span><span class="p">)</span><span class="si">}</span><span class="s">&lt;/button&gt;</span>
<span class="s">    &quot;</span>

    <span class="nx">@$el</span><span class="p">.</span><span class="nx">html</span> <span class="nx">html</span>
    <span class="nx">@updateTable</span><span class="p">()</span>
    <span class="nx">@trigger</span> <span class="s">&quot;rendered&quot;</span>

  <span class="nv">afterRender: </span><span class="o">=&gt;</span>
    <span class="nx">@updateFlot</span><span class="p">()</span>

  <span class="nv">updateTable: </span><span class="o">-&gt;</span>

    <span class="nv">type = </span><span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span>
    <span class="nv">week = </span><span class="nx">@selected</span><span class="p">.</span><span class="nx">week</span>

    <span class="nv">html = </span><span class="s">&quot;&lt;table class=&#39;tabular&#39;&gt;&quot;</span>
    <span class="k">for</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">@rows</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>skip if selected row doesn't have any of the selected item type</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">continue</span> <span class="k">if</span> <span class="o">!~</span><span class="nx">_</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">itemTypes</span><span class="p">,</span> <span class="s">&quot;key&quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span>
      <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;&lt;tr&gt;&lt;th&gt;</span><span class="si">#{</span><span class="nx">@subtestNames</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">type</span><span class="p">]</span><span class="si">}</span><span class="s">&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&quot;</span>
      <span class="k">for</span> <span class="nx">itemType</span> <span class="k">in</span> <span class="nx">row</span><span class="p">.</span><span class="nx">itemTypes</span>
        <span class="k">if</span> <span class="nx">itemType</span><span class="p">.</span><span class="nx">key</span> <span class="o">!=</span> <span class="nx">type</span> <span class="k">then</span> <span class="k">continue</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;</span>
<span class="s">          &lt;tr&gt;</span>
<span class="s">            &lt;td&gt;</span><span class="si">#{</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="s"> correct&lt;/td&gt;&lt;td&gt;</span><span class="si">#{</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">correct</span><span class="si">}</span><span class="s">/</span><span class="si">#{</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">attempted</span><span class="si">}</span><span class="s">&lt;/td&gt;</span>
<span class="s">          &lt;/tr&gt;</span>
<span class="s">          &lt;tr&gt;</span>
<span class="s">            &lt;td&gt;</span><span class="si">#{</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="s"> correct per minute&lt;/td&gt;&lt;td&gt;</span><span class="si">#{</span><span class="nx">itemType</span><span class="p">.</span><span class="nx">itemsPerMinute</span><span class="si">}</span><span class="s">&lt;/td&gt;</span>
<span class="s">          &lt;/tr&gt;</span>
<span class="s">         &quot;</span>
    <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;&lt;/table&gt;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Add warning if all students mode</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">availableItemTypesThisWeek = </span><span class="nx">_</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="nx">@rows</span><span class="p">[</span><span class="nx">week</span><span class="p">]</span><span class="o">?</span><span class="p">.</span><span class="nx">itemTypes</span><span class="p">,</span> <span class="s">&quot;key&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nx">week</span> <span class="o">&gt;=</span> <span class="nx">@rows</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="o">!~</span><span class="nx">availableItemTypesThisWeek</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span>
      <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;&lt;section&gt;No data for this assessment.&lt;/section&gt;&quot;</span>
    <span class="k">else</span> <span class="k">if</span> <span class="nx">@mode</span> <span class="o">==</span> <span class="nx">@AGGREGATE</span>

      <span class="nv">score = </span><span class="mi">0</span>

      <span class="nv">data = </span><span class="k">if</span> <span class="nx">@flotData</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span><span class="o">?</span>
        <span class="nx">@flotData</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">data</span>
      <span class="k">else</span>
        <span class="p">[]</span>

      <span class="k">for</span> <span class="nx">datum</span> <span class="k">in</span> <span class="nx">data</span>
        <span class="k">if</span> <span class="nx">datum</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nx">week</span><span class="o">+</span><span class="mi">1</span>
          <span class="nv">score = </span><span class="nx">datum</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 

      <span class="nv">threshold = </span><span class="nx">@warningThresholds</span><span class="p">[</span><span class="nx">type</span><span class="p">][</span><span class="nx">week</span><span class="p">]</span>

      <span class="nv">high = </span><span class="nx">threshold</span><span class="p">.</span><span class="nx">target</span> <span class="o">+</span> <span class="nx">threshold</span><span class="p">.</span><span class="nx">spread</span>
      <span class="nv">low  = </span><span class="nx">threshold</span><span class="p">.</span><span class="nx">target</span> <span class="o">-</span> <span class="nx">threshold</span><span class="p">.</span><span class="nx">spread</span>
      <span class="nv">difference = </span><span class="nx">score</span> <span class="o">-</span> <span class="nx">threshold</span><span class="p">.</span><span class="nx">target</span>

      <span class="k">if</span> <span class="nx">score</span> <span class="o">&gt;</span> <span class="nx">high</span>
        <span class="nv">result = </span><span class="s">&quot;(</span><span class="si">#{</span><span class="nx">score</span><span class="si">}</span><span class="s">), </span><span class="si">#{</span><span class="nx">difference</span><span class="si">}</span><span class="s"> correct items per minute above the benchmark&quot;</span>
        <span class="nv">warnings = </span><span class="s">&quot;Your class is doing well, </span><span class="si">#{</span><span class="nx">result</span><span class="si">}</span><span class="s">, continue with the reading program. Share your and your class’ great work with parents. Reward your class with some fun reading activities such as reading marathons or competitions. However, look at a student grouping report for this assessment and make sure that those children performing below average get extra attention and practice and don’t fall behind.&quot;</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">score</span> <span class="o">&lt;</span> <span class="nx">low</span>
        <span class="nv">result = </span><span class="s">&quot;(</span><span class="si">#{</span><span class="nx">score</span><span class="si">}</span><span class="s">), </span><span class="si">#{</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">difference</span><span class="p">)</span><span class="si">}</span><span class="s"> correct items per minute below the benchmark&quot;</span>
        <span class="nv">warnings = </span><span class="s">&quot;Your class is performing below the grade-level target, </span><span class="si">#{</span><span class="nx">result</span><span class="si">}</span><span class="s">. Plan for additional lesson time focusing on reading in consultation with your principal. Encourage parents to spend more time with reading materials at home – remind them that you are a team working together to help their children learning to read. Think about organizing other events and opportunities for practice, e.g., reading marathons or competitions to motivate students to read more.&quot;</span>
      <span class="k">else</span>
        <span class="k">if</span> <span class="nx">difference</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">difference</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span> <span class="o">==</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">difference</span><span class="p">)</span>
          <span class="nv">result = </span><span class="p">(</span><span class="nx">score</span> <span class="o">-</span> <span class="nx">threshold</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; correct items per minute above the bench mark&quot;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="nx">difference</span> <span class="o">==</span> <span class="mi">0</span>
          <span class="nv">result = </span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">score</span><span class="si">}</span><span class="s"> correct items per minute&quot;</span>
        <span class="k">else</span>
          <span class="nv">result = </span><span class="s">&quot;(</span><span class="si">#{</span><span class="nx">score</span><span class="si">}</span><span class="s">), &quot;</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">score</span> <span class="o">-</span> <span class="nx">threshold</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; correct items per minute below the bench mark&quot;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>@TODO make that "minute" unit dynamic</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">warnings = </span><span class="s">&quot;Your class is in line with expectations, </span><span class="si">#{</span><span class="nx">result</span><span class="si">}</span><span class="s">. Continue with the reading program and keep up the good work! Look at a student grouping report for this assessment and make sure that those children performing below average get extra attention and practice and don’t fall behind.&quot;</span>

      <span class="nx">html</span> <span class="o">+=</span> <span class="s">&quot;</span>
<span class="s">        &lt;section&gt;</span>
<span class="s">          </span><span class="si">#{</span><span class="nx">warnings</span><span class="si">}</span><span class="s"></span>
<span class="s">        &lt;/section&gt;</span>
<span class="s">      &quot;</span>

    <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">table_container&quot;</span><span class="p">).</span><span class="nx">html</span> <span class="nx">html</span>


  <span class="nv">updateFlot: </span><span class="o">=&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Flot options</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@flotOptions =</span>
      <span class="s">&quot;xaxis&quot;</span> <span class="o">:</span>
        <span class="s">&quot;min&quot;</span>           <span class="o">:</span> <span class="mf">0.5</span>
        <span class="s">&quot;max&quot;</span>           <span class="o">:</span> <span class="nx">@partCount</span> <span class="o">+</span> <span class="mf">0.5</span>
        <span class="s">&quot;ticks&quot;</span>         <span class="o">:</span> <span class="p">(</span> <span class="nb">String</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">..</span><span class="nx">@partCount</span><span class="p">]</span> <span class="p">)</span>
        <span class="s">&quot;tickDecimals&quot;</span>  <span class="o">:</span> <span class="mi">0</span>
        <span class="s">&quot;tickFormatter&quot;</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">num</span> <span class="p">)</span> <span class="o">=&gt;</span> 
          <span class="k">if</span> <span class="nx">@subtestNames</span><span class="p">[</span><span class="nx">num</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span><span class="p">]</span><span class="o">?</span>
            <span class="k">return</span> <span class="s">&quot;&lt;button class=&#39;xtick </span><span class="si">#{</span><span class="k">if</span> <span class="nx">num</span><span class="o">-</span><span class="mi">1</span><span class="o">==</span><span class="nx">@selected</span><span class="p">.</span><span class="nx">week</span> <span class="k">then</span> <span class="s">&#39;selected&#39;</span> <span class="k">else</span> <span class="s">&#39;&#39;</span><span class="si">}</span><span class="s">&#39; data-index=&#39;</span><span class="si">#{</span><span class="nx">num</span><span class="o">-</span><span class="mi">1</span><span class="si">}</span><span class="s">&#39;&gt;</span><span class="si">#{</span><span class="nx">@subtestNames</span><span class="p">[</span><span class="nx">num</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span><span class="p">]</span><span class="si">}</span><span class="s">&lt;/button&gt;&quot;</span>
          <span class="k">else</span>
            <span class="s">&quot;&quot;</span>
      <span class="s">&quot;grid&quot;</span> <span class="o">:</span>
        <span class="s">&quot;markings&quot;</span> <span class="o">:</span>
          <span class="s">&quot;color&quot;</span>  <span class="o">:</span> <span class="s">&quot;</span><span class="err">#</span><span class="s">ffc&quot;</span>
          <span class="s">&quot;xaxis&quot;</span>  <span class="o">:</span> 
            <span class="s">&quot;to&quot;</span>   <span class="o">:</span> <span class="nx">@selected</span><span class="p">.</span><span class="nx">week</span> <span class="o">+</span> <span class="mf">0.5</span>
            <span class="s">&quot;from&quot;</span> <span class="o">:</span> <span class="nx">@selected</span><span class="p">.</span><span class="nx">week</span> <span class="o">-</span> <span class="mf">0.5</span>


    <span class="nv">displayData = </span><span class="p">[]</span>
    <span class="nx">displayData</span><span class="p">.</span><span class="nx">push</span> <span class="nx">@flotData</span><span class="p">[</span><span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span><span class="p">]</span>      <span class="k">if</span> <span class="nx">@flotData</span><span class="p">[</span><span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span><span class="p">]</span>
    <span class="nx">displayData</span><span class="p">.</span><span class="nx">push</span> <span class="nx">@flotBenchmark</span><span class="p">[</span><span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span><span class="p">]</span> <span class="k">if</span> <span class="nx">@flotBenchmark</span><span class="p">[</span><span class="nx">@selected</span><span class="p">.</span><span class="nx">itemType</span><span class="p">]</span>
    
    <span class="vi">@flot = </span><span class="nx">$</span><span class="p">.</span><span class="nx">plot</span> <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">flot-container&quot;</span><span class="p">),</span> <span class="nx">displayData</span><span class="p">,</span> <span class="nx">@flotOptions</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Takes the results for each itemType and replaces them with an average</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">aggregate: </span><span class="nf">(oldRows) -&gt;</span>
    <span class="nv">newRows = </span><span class="p">[]</span>
    <span class="k">for</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">oldRows</span>
      <span class="nx">newRows</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span>
        <span class="s">&quot;part&quot;</span>      <span class="o">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">part</span>
        <span class="s">&quot;itemTypes&quot;</span> <span class="o">:</span> <span class="p">[]</span>

      <span class="k">for</span> <span class="nx">results</span> <span class="k">in</span> <span class="nx">row</span><span class="p">.</span><span class="nx">itemTypes</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>blank</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">mean =</span>
          <span class="s">&quot;name&quot;</span>           <span class="o">:</span> <span class="s">&quot;&quot;</span>
          <span class="s">&quot;key&quot;</span>            <span class="o">:</span> <span class="s">&quot;&quot;</span>
          <span class="s">&quot;correct&quot;</span>        <span class="o">:</span> <span class="mi">0</span>
          <span class="s">&quot;attempted&quot;</span>      <span class="o">:</span> <span class="mi">0</span>
          <span class="s">&quot;itemsPerMinute&quot;</span> <span class="o">:</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>add</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">for</span> <span class="nx">result</span> <span class="k">in</span> <span class="nx">results</span>
          <span class="nv">mean.name           = </span><span class="nx">result</span><span class="p">.</span><span class="nx">name</span>
          <span class="nv">mean.key            = </span><span class="nx">result</span><span class="p">.</span><span class="nx">key</span>
          <span class="nx">mean</span><span class="p">.</span><span class="nx">correct</span>        <span class="o">+=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">correct</span>
          <span class="nx">mean</span><span class="p">.</span><span class="nx">attempted</span>      <span class="o">+=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">attempted</span>
          <span class="nx">mean</span><span class="p">.</span><span class="nx">itemsPerMinute</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">itemsPerMinute</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>divide</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">mean</span><span class="p">.</span><span class="nx">correct</span>        <span class="o">/=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span>
        <span class="nx">mean</span><span class="p">.</span><span class="nx">attempted</span>      <span class="o">/=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span>
        <span class="nx">mean</span><span class="p">.</span><span class="nx">itemsPerMinute</span> <span class="o">/=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Round</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">mean.correct = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">mean</span><span class="p">.</span><span class="nx">correct</span><span class="p">)</span>
        <span class="nv">mean.attempted = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">mean</span><span class="p">.</span><span class="nx">attempted</span><span class="p">)</span>
        <span class="nv">mean.itemsPerMinute = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">mean</span><span class="p">.</span><span class="nx">itemsPerMinute</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>replace values in @rows</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">newRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">itemTypes</span><span class="p">.</span><span class="nx">push</span> <span class="nx">mean</span>

    <span class="k">return</span> <span class="nx">newRows</span>

<span class="k">class</span> <span class="nx">SortedCollection</span>
  <span class="nv">constructor: </span><span class="nf">(options) -&gt;</span>
    <span class="vi">@sorted    = </span><span class="p">[]</span>
    <span class="vi">@models    = </span><span class="nx">options</span><span class="p">.</span><span class="nx">models</span>
    <span class="vi">@attribute = </span><span class="nx">options</span><span class="p">.</span><span class="nx">attribute</span>
    

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 
=======
<!DOCTYPE html>  <html> <head>   <title>ProgressView.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               ProgressView.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>! - variable name FUBAR
assessment = part = week</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Arguments and member vars</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Catch things that "look" "odd"</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Find out how many parts belong to the progress report
Make a names by pertinentIndex and itemType</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>get names</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Make a map in case we need it of which week belongs to which index</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>make the resultsByPart and the itemTypeList</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Compile data and save to @rows
this is for the table</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>iterate through all weeks</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>iterate through all itemTypes for this week</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>select first itemType</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>push an object</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>each row is one week/part</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Aggregate mode averages data across students</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Select the most recent thing with data</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Make flot data</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Create benchmark flot graphs</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>create warning thresholds</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Empty warning</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Flot containers</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Set the table</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>skip if selected row doesn't have any of the selected item type</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Add warning if all students mode</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>@TODO make that "minute" unit dynamic</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Flot options</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Takes the results for each itemType and replaces them with an average</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>blank</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>add</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>divide</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Round</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>replace values in @rows</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 
>>>>>>> ojai-server
